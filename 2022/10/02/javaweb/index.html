<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="google-site-verification" content="TZE0rZyIqLl10trYu3BWBWa1Vmz6HFwhb2OcNEK4u-s" />
     <link rel="shortcut icon" href= /img/favicon.ico >
    <title>
        acwer
    </title>
    <meta name="description" content= 欢迎来到我的博客! >
    <meta name="keywords" content= acwing,algorithm,leetcode,blog >
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-home
 replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            javaweb基础知识
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h2 id="web的基本概念"><a href="#web的基本概念" class="headerlink" title="web的基本概念"></a>web的基本概念</h2><p>web是网页的意思,例如<a target="_blank" rel="noopener" href="http://www.baidu.com(百度)./">www.baidu.com(百度)。</a></p>
<p>web又分成两种</p>
<ul>
<li><h3 id="静态web"><a href="#静态web" class="headerlink" title="静态web"></a>静态web</h3><ol>
<li>由html,css所构成的网页.</li>
<li>网页的数据始终不会发生变化.</li>
</ol>
</li>
<li><h3 id="动态web"><a href="#动态web" class="headerlink" title="动态web"></a>动态web</h3></li>
</ul>
<ol>
<li>几乎所有的网站都是动态web,例如淘宝.</li>
<li>动态web在不同的情况下,相关的数据会发生变化.</li>
<li>技术栈:jsp,servlet等</li>
</ol>
<p><strong>在java中，动态web开发技术统称为javaweb</strong></p>
<h2 id="web应用程序"><a href="#web应用程序" class="headerlink" title="web应用程序"></a>web应用程序</h2><ul>
<li><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3></li>
</ul>
<p>web应用程序是可以通过浏览器访问的程序，web应用程序例如index.html,index2.html…..,外界可以通过浏览器来对这些web应用程序进行访问。</p>
<ul>
<li><h3 id="构成"><a href="#构成" class="headerlink" title="构成"></a>构成</h3></li>
</ul>
<p>一个web应用程序由</p>
<ol>
<li>java程序</li>
<li>html css js</li>
<li>jsp,servlet</li>
<li>相关的配置文件(properties)</li>
<li>jar包</li>
</ol>
<p>所构成.</p>
<p><strong>web应用程序编写完成后,需要有一个服务器来进行同一管理。</strong></p>
<h3 id="静态web-1"><a href="#静态web-1" class="headerlink" title="静态web"></a>静态web</h3><ul>
<li><p>由html，css所构成的web页面叫做静态web。</p>
</li>
<li><p>静态web的通信过程</p>
</li>
</ul>
<p>客户端通过网络(network)来对服务器中的web服务(web service)进行第一次请求(Request)，然后web服务根据相应的请求去找相应的网页，找到了相应的网页然后再响应到web服务，然后继续响应(Response)到客户端</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/eee10952b3bb5bf2196b68b6147dcabc.png" alt="-1.png"> </p>
<ul>
<li>在f12的网络中可以找到请求和响应的相关文件和信息</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/40eace3938522de0cdd28c8d67ee7733.png" alt="-2.png"> </p>
<ul>
<li>静态web存在的缺点</li>
</ul>
<ol>
<li>web页面无法动态更新，所有用户看到的都是同一页面。</li>
<li>无法与数据库进行交互。</li>
</ol>
<h3 id="动态web-1"><a href="#动态web-1" class="headerlink" title="动态web"></a>动态web</h3><ul>
<li><p>在不同的情况下会发生相应的变化的网页叫做动态web。</p>
</li>
<li><p>动态web的通信过程。</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/cefc47042ff64d4ea4011dd69ab7d046.png" alt="在这里插入图片描述"></p>
<ul>
<li>动态web的缺点</li>
</ul>
<p>假如服务器的动态资源出现了问题，我们需要更改后台的程序，然后重新发布。</p>
<h2 id="web服务器"><a href="#web服务器" class="headerlink" title="web服务器"></a>web服务器</h2><ul>
<li>基本概念：</li>
</ul>
<p>web服务器是一种被动操作，处理用户给服务器的一些请求和给用户一些响应信息。</p>
<ul>
<li>常用的web服务器</li>
</ul>
<p>tomcat</p>
<h2 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h2><ul>
<li><p>安装tomcat</p>
</li>
<li><p>启动和关闭tomcat</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/51bbd671729144519e50f5186cbb944f.png" alt="在这里插入图片描述"></p>
<p>访问测试:localhost:8080，不过我把8080端口改成了80端口。</p>
<ul>
<li>各个文件夹的作用</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/6c8cdb4e921d4a89a993972a4d86bb6e.png" alt="在这里插入图片描述"></p>
<ul>
<li>端口的修改</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/7e869e7e640940ba8980e3a36585efd9.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/1c31959e541c4429bf585d5b0fec7ba3.png" alt="在这里插入图片描述"></p>
<ul>
<li>解决乱码问题</li>
</ul>
<ol>
<li><p>进入logging.xml文件</p>
<p><img src="https://img-blog.csdnimg.cn/c43c5c12147342108f8b3ba99be94c1b.png" alt="在这里插入图片描述"></p>
</li>
<li><p>把utf-8修改成gbk</p>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/d48c6409644545f98aa9f7ad76d244a1.png" alt="在这里插入图片描述"></p>
<h3 id="发布一个web网站"><a href="#发布一个web网站" class="headerlink" title="发布一个web网站"></a>发布一个web网站</h3><p>将自己写的网站放入到webapps文件中，就可以访问了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--webapps：tomcat服务器的web目录</span><br><span class="line">	-ROOT：根用户的网站目录</span><br><span class="line">	-kuangstudy: 自定义的网站目录</span><br><span class="line">		-WEB-INF：</span><br><span class="line">			-classes：存放Java程序</span><br><span class="line">			-lib：web应用所依赖的jar包</span><br><span class="line">			-web.xml：网站的配置文件</span><br><span class="line">		-index.html:默认的首页</span><br><span class="line">		-css</span><br><span class="line">		-js</span><br><span class="line">		-img</span><br></pre></td></tr></table></figure>





<h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><h3 id="TCP和UDP"><a href="#TCP和UDP" class="headerlink" title="TCP和UDP"></a>TCP和UDP</h3><h4 id="1-TCP"><a href="#1-TCP" class="headerlink" title="1.TCP:"></a>1.TCP:</h4><p>​		当一台计算机和另一台计算机相互通讯时，在这种协议下，两台计算机之间会比较畅通</p>
<p>和可靠(因为在连接之前会进行三次握手，在断开的时候会四次挥手)。</p>
<h4 id="2-UDP"><a href="#2-UDP" class="headerlink" title="2.UDP:"></a>2.UDP:</h4><p>​		它是一种无连接的协议，数据想发就发，所以不会建立可靠的数据传输，也就是说数据</p>
<p>在传输的过程中可能会导致部分数据丢失，但是比TCP更加高效，适合视频直播类的。</p>
<h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h4><p>​		我们的电脑上可能存在大量的应用程序，我们可以通过ip地址来访问目标计算机，然后</p>
<p>通过端口号来访问特定的应用程序。</p>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/01/136759_577c675a11-6.png" alt="6.png"> </p>
<h3 id="Socket技术"><a href="#Socket技术" class="headerlink" title="Socket技术"></a>Socket技术</h3><p>​		通过Socket技术，我们可以实现两台计算机之间的通信，Socket也被翻译成套接字，它</p>
<p>支持TCP和UDP协议。java对于socket技术有一套完整的封装，我们可以通过Java来实现一</p>
<p>套完整的通信，</p>
<p>​		要实现Socket通信，我们必须创建一个数据发送者和一个数据接收者，也就是客户端和</p>
<p>服务器端，我们需要提前开启服务器端，等待客户端对服务器端的连接。</p>
<p>下面展示的是<strong>数据从客户端到服务端的过程</strong>,通过一串代码来进行演示。</p>
<h4 id="相关代码："><a href="#相关代码：" class="headerlink" title="相关代码："></a>相关代码：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*server类*/</span></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;---正在等待客户端的连接---&quot;</span>);</span><br><span class="line">            <span class="comment">//阻塞该线程，等待客户端的连接，当客户端对服务端发起连接时，此时服务端会恢复成正常状态。</span></span><br><span class="line">            <span class="comment">/*  返回的对象是客户端的连接。即为socket，socket中存储了有关于客户端的一些数据</span></span><br><span class="line"><span class="comment">                所以，我们可以通过某些方法来得到客户端的ip地址。</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取主机，也就是服务端的地址。</span></span><br><span class="line">            System.out.println(<span class="string">&quot;连接已建立，客户端端的ip地址为&quot;</span>+socket.getInetAddress().getHostAddress());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//读取从客户端发来的数据</span></span><br><span class="line">            System.out.println(<span class="string">&quot;读取客户端的数据:&quot;</span>);</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//输出读取的数据</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span>((str = bufferedReader.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            socket.close();</span><br><span class="line">            <span class="comment">//关闭服务端</span></span><br><span class="line">            server.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*client类*/</span></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//此处的localhost是服务器端的地址。1000是服务器端的端口号。</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;localhost&quot;</span>,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;已经连接到服务器端!&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//写入数据</span></span><br><span class="line">            <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">            bufferedWriter.write(<span class="string">&quot;我叫刘德华\n&quot;</span>);</span><br><span class="line">            bufferedWriter.write(<span class="string">&quot;我是非常的帅气&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//将字符流中的数据进行刷新</span></span><br><span class="line">            bufferedWriter.flush();</span><br><span class="line">            System.out.println(<span class="string">&quot;数据已经发送！&quot;</span>);</span><br><span class="line">            <span class="comment">//关闭客户端</span></span><br><span class="line">            socket.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;服务器连接失败!&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="maven的基础知识"><a href="#maven的基础知识" class="headerlink" title="maven的基础知识"></a>maven的基础知识</h2><h3 id="maven环境搭建和配置"><a href="#maven环境搭建和配置" class="headerlink" title="maven环境搭建和配置"></a>maven环境搭建和配置</h3><ul>
<li><p>为什么要学习这个技术？</p>
<pre><code>在Javaweb中，有大量的jar包需要我们去导入，如果一个一个导入，则会浪费大量的时间。由此，maven诞生了。maven项目管理工具的目的就是为了方便导入和配置jar包。
</code></pre>
</li>
<li><p>maven会规定你该如何地去编写Java代码，必须按照这个规范来。</p>
</li>
<li><p>下载解压maven压缩文件</p>
</li>
<li><p>配置环境变量</p>
<p>在系统变量中新建和配置path和MAVEN_HOME。</p>
<ul>
<li>MAVEN_HOME            D:\apache-maven-3.6.1-bin\apache-maven-3.6.1</li>
<li>path                 %MAVEN_HOME%\bin</li>
</ul>
</li>
<li><p>通过mvn -version命令来判断maven是否安装成功。</p>
<p><img src="https://img-blog.csdnimg.cn/204f25db7ab54c8397a069f4a0a6f3b5.png" alt="在这里插入图片描述"></p>
</li>
<li><p>配置文件</p>
<ul>
<li><p>通过阿里云镜像(mirror)来加快下载和导入jar包。</p>
</li>
<li><p>国内尽量使用阿里云镜像</p>
</li>
<li><p>将下面这段代码导入到&#x2F;conf&#x2F;setting.xml文件中。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="https://img-blog.csdnimg.cn/cf6cea3a39404a1fb61a0e328ea39994.png" alt="在这里插入图片描述"></p>
</li>
</ul>
</li>
<li><p>建立一个本地仓库(localRepository)</p>
<ul>
<li><p>进入cof&#x2F;setting.xml</p>
</li>
<li><p>在localRepository标签中加入一串代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\apache-maven-3.6.1-bin\apache-maven-3.6.1\mvn_resp<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/9495f96f96cc48eba4ccabbd0ac013d3.png" alt="在这里插入图片描述"></p>
</li>
</ul>
</li>
</ul>
<h3 id="maven在idea中的使用"><a href="#maven在idea中的使用" class="headerlink" title="maven在idea中的使用"></a>maven在idea中的使用</h3><ol>
<li><p>启动idea</p>
</li>
<li><p>创建一个maven项目</p>
<p><img src="https://img-blog.csdnimg.cn/7f60f7d6841d4f418abb27124913b2f4.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/5de21f80cae24acca38ab1ae9aea8f35.png" alt="在这里插入图片描述"> </p>
<ol start="3">
<li><p>等待项目初始化完毕</p>
</li>
<li><p>观察maven项目中多了什么东西？</p>
</li>
</ol>
<p>多了一些maven项目需要的jar包。</p>
<ol start="5">
<li><p>记住Maven的文件地址、配置文件、本地仓库需要配置正确，这样才不会爆红。</p>
</li>
<li><p>创建一个普通的maven项目</p>
</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_f078e3d028-11.png" alt="11.png"><br>然后将maven的文件地址、配置文件、本地仓库配置正确。</p>
<ol start="7">
<li>普通的maven项目的目录</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_1e5fc93a28-22.png" alt="22.png"> </p>
<ol start="8">
<li>模板创建maven项目的目录</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_3fad347728-44.png" alt="44.png"> </p>
<ol start="9">
<li>maven项目的标记文件夹功能</li>
</ol>
<p>创建java和resources文件夹，可能不能创建class文件。则我们需要对文件夹进行标记。</p>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_57916ca528-21.png" alt="21.png"> </p>
<ol start="10">
<li>在idea中配置tomcat</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_730c37f928-33.png" alt="33.png"> </p>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_886bc2f128-44.png" alt="44.png"> </p>
<ol start="11">
<li>解决警告问题</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_9ae88fe728-77.png" alt="77.png"> </p>
<ol start="12">
<li>运行该项目</li>
</ol>
<p><img src="https://cdn.acwing.com/media/article/image/2022/08/30/136759_b5dde08028-66.png" alt="66.png"> </p>
<ol start="13">
<li>war包</li>
</ol>
<p>一般Javaweb项目会打包成war包。</p>
<ol start="14">
<li>maven的生命周期</li>
</ol>
<p>启动compile，首先不是从中央仓库中寻找jar包，而是先到阿里云镜像仓库中寻找jar包，把这些jar包放入到本地仓库中。</p>
<p>compile：编译</p>
<p>clean：清理target</p>
<p>package：打成一个jar包</p>
<p>test：执行test目录项目</p>
<p>install：将该项目打成jar包放到本地仓库内。</p>
<h2 id="helloServlet"><a href="#helloServlet" class="headerlink" title="helloServlet"></a>helloServlet</h2><ol>
<li><p>什么是servlet？</p>
<ul>
<li>servlet是sun公司开发动态web的一项技术。</li>
<li>sun公司在这些api中提供了一个接口，即为servlet。</li>
</ul>
</li>
<li><p>开发servlet的两个小步骤</p>
<ul>
<li>编写一个类实现servlet接口。</li>
<li>把开发好的类部署到web服务器中。</li>
</ul>
<p>我们把实现了servlet接口的Java程序叫做servlet。</p>
</li>
<li><p>helloServlet</p>
<p>servlet接口有两个默认的实现类，一个是HttpServlet</p>
<ol>
<li><p>创建一个maven项目</p>
</li>
<li><p>导入servlet相关依赖</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;3.1.0&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;2.3.3&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>编写一个servlet程序</p>
<ul>
<li><p>编写一个普通类</p>
</li>
<li><p>实现HttpServlet接口，也就是直接继承HttpServlet接口</p>
</li>
<li><p>编写servlet注解</p>
</li>
</ul>
<p>在类中加上@WebServlet(“&#x2F;Demo01”)注解，意思就是通过Demo01可以访问servlet这个页面。</p>
<ul>
<li>配置tomcat服务器</li>
</ul>
</li>
</ol>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/1732c8dc1fbe4fd8b8d519f73f33fc3e.png" alt="在这里插入图片描述"></p>
<p>将该项目打包成一个war包，通过war包可以访问该项目。</p>
<p><img src="https://img-blog.csdnimg.cn/0484e3bd6a444f0f8833f280f82718b3.png" alt="在这里插入图片描述"></p>
<pre><code>            6. 运行程序
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/f602cc2cb8e94cb6b1e61473e3ae1059.png" alt="在这里插入图片描述"></p>
<h2 id="开发servlet有三种方法"><a href="#开发servlet有三种方法" class="headerlink" title="开发servlet有三种方法"></a>开发servlet有三种方法</h2><ol>
<li>实现servlet接口</li>
<li>继承GenericServlet</li>
<li>继承HttpServlet</li>
</ol>
<h3 id="servlet接口的方式来开发。"><a href="#servlet接口的方式来开发。" class="headerlink" title="servlet接口的方式来开发。"></a>servlet接口的方式来开发。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该函数用于初始化Servlet</span></span><br><span class="line">    <span class="comment">//类似于类的构造函数，该函数只会调用一次。</span></span><br><span class="line">    <span class="comment">//当用户第一次访问servlet时，该函数会被调用。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init it...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到servlet的配置文件，这个地方不是重点。</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个函数用户处理业务逻辑</span></span><br><span class="line">    <span class="comment">//程序员应当把业务逻辑写到这里</span></span><br><span class="line">    <span class="comment">//当用户每次访问servlet时，servlet每次都会调用service()方法</span></span><br><span class="line">    <span class="comment">//req  用户获取客户端(浏览器)的信息</span></span><br><span class="line">    <span class="comment">//res  用于向客户端(浏览器)返回信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service it&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从res中获得writer</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line"></span><br><span class="line">        printWriter.println(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该函数没有什么意义</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//销毁servlet实例(释放内存)</span></span><br><span class="line">    <span class="comment">//当关闭tomcat服务器时，则会调用该方法。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy it...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="使用GenericServlet实现类的方式来开发"><a href="#使用GenericServlet实现类的方式来开发" class="headerlink" title="使用GenericServlet实现类的方式来开发"></a>使用GenericServlet实现类的方式来开发</h3><p>通过GenericServlet去开发servlet，只需要重写service()方法，相对于servlet接口开发</p>
<p>比较简单一点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">GenericServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;hello world generic!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用HttpServlet实现类的方式来开发"><a href="#使用HttpServlet实现类的方式来开发" class="headerlink" title="使用HttpServlet实现类的方式来开发"></a>使用HttpServlet实现类的方式来开发</h3><p>通过HttpServlet实现类来开发servlet，我们需要重写doGet()方法和doPost()方法,这是目前使用最多的</p>
<p>一种方法。</p>
<p>首先我们需要对表单form的get方法和post方法进行一些了解，表单form的get和post方法和http的get和post方法</p>
<p>是类似的。</p>
<ul>
<li><p>form的get和post方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">    &lt;form method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;name:&lt;input type=&quot;text&quot; name=&quot;name&quot;/&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;password:&lt;input type=&quot;password&quot; name=&quot;pwd&quot;/&gt;&lt;/p&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
</ul>
<p>	</p>
<p><strong>form的get和post方法的结论</strong></p>
<ol>
<li><p>从安全性看，get&lt;post，get提交的数据会在地址栏中显示，而post提交的数据在地址栏中不会显示。</p>
</li>
<li><p>从提交的内容看，get&lt;post，get提交的数据不能大于2k，而post提交的数据大小建议不要大于64k。</p>
</li>
<li><p>从请求响应速度看，get&gt;post,get要求服务器立刻处理请求或响应请求，而post请求可能会形成一个队列</p>
<p>的请求，响应可能会形成一个队列的相应。</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/Demo01&quot;)</span><br><span class="line">public class HelloServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">    //处理get请求</span><br><span class="line">    //req:用于获得客户端提交的信息</span><br><span class="line">    //res:用于获得向客户端返回的信息</span><br><span class="line">    //req对象实例和res对象实例是由tomcat容器来创建的。</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        //业务逻辑</span><br><span class="line">        PrintWriter printWriter = res.getWriter();</span><br><span class="line">        printWriter.println(&quot;hello httpServlet!&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //处理post请求</span><br><span class="line">    //req:用于获得客户端提交的信息</span><br><span class="line">    //res:用于获得向客户端返回的信息</span><br><span class="line"></span><br><span class="line">    //很多情况下，我们都是将doGet和doPost方法合二为一</span><br><span class="line">    //即在doPost方法下运用doGet方法</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="servlet的生命周期"><a href="#servlet的生命周期" class="headerlink" title="servlet的生命周期"></a>servlet的生命周期</h2><p>servlet部署在容器里(tomcat)，他的生命周期由容器(tomcat)来管理</p>
<p>servlet生命周期一般分成几个阶段:</p>
<ol>
<li><p>tomcat容器创建servlet实例。</p>
</li>
<li><p>实例调用servlet的init方法，该方法只会在第一次访问servlet时</p>
<p>被调用一次。</p>
</li>
<li><p>实例调用servlet的service方法，一般逻辑代码在这里处理，在</p>
<p>servlet实例时，会被调用一次。</p>
</li>
<li><p>当关闭tomcat服务器时，servlet实例会调用一次destroy方法。</p>
</li>
</ol>
<h2 id="简单用户登录网站实例"><a href="#简单用户登录网站实例" class="headerlink" title="简单用户登录网站实例"></a>简单用户登录网站实例</h2><ul>
<li><p>框架图</p>
<p><img src="https://img-blog.csdnimg.cn/1cc6e1c86b3644cbb168480449d1b44b.png" alt="在这里插入图片描述"></p>
</li>
<li><p>登录界面Login.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/Login&quot;)</span><br><span class="line">public class Login extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        //将页面内容改成gbk编码模式，防止中文乱码。</span><br><span class="line">        res.setContentType(&quot;text/html;charset=gbk&quot;);</span><br><span class="line"></span><br><span class="line">        PrintWriter printWriter = res.getWriter();</span><br><span class="line">        /*</span><br><span class="line">        	form标签中 action=t </span><br><span class="line">        	意思是当登录成功时，会自动跳转到t页面中，这里的t是LoginCheck,</span><br><span class="line">        	LoginCheck是验证用户界面的注解名。</span><br><span class="line">        </span><br><span class="line">        */</span><br><span class="line">        printWriter.println(&quot;&lt;!DOCTYPE html&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;html&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;head&gt;\n&quot; +</span><br><span class="line">                &quot;    &lt;title&gt;&lt;/title&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/head&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;body&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;center&gt;\n&quot; +</span><br><span class="line">                &quot;    &lt;form action=LoginCheck method=\&quot;post\&quot;&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;p&gt;name:&lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;/&gt;&lt;/p&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;p&gt;password:&lt;input type=\&quot;password\&quot; name=\&quot;pwd\&quot;/&gt;&lt;/p&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;input type=\&quot;submit\&quot; value=\&quot;submit\&quot;&gt;\n&quot; +</span><br><span class="line">                &quot;\n&quot; +</span><br><span class="line">                &quot;    &lt;/form&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/center&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/body&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/html&gt;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>验证用户界面LoginCheck.java</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">//用户验证Servlet</span><br><span class="line">@WebServlet(&quot;/LoginCheck&quot;)</span><br><span class="line">public class LoginCheck extends HttpServlet &#123;</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        //接收登录界面的账号和密码</span><br><span class="line">        //参数是Login.java的对应input的对应name</span><br><span class="line">        String username = req.getParameter(&quot;name&quot;);</span><br><span class="line">        String password = req.getParameter(&quot;pwd&quot;);</span><br><span class="line"></span><br><span class="line">        //验证用户名和密码是否正确</span><br><span class="line">        if(username.equals(&quot;root&quot;)==true&amp;&amp;password.equals(&quot;123456&quot;)==true)&#123;</span><br><span class="line">            //合法，跳转到欢迎界面</span><br><span class="line">            res.sendRedirect(&quot;Welcome&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            //不合法，跳转到登录界面</span><br><span class="line">            //参数是写上登录界面的url地址,url地址也就是注解名。</span><br><span class="line">            res.sendRedirect(&quot;Login&quot;);</span><br><span class="line">            System.out.println(&quot;请重新登录！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>欢迎界面Welcome.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelCome</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//将页面内容改成gbk编码模式，防止中文乱码。</span></span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>res.sendRedirect(“Welcome”)实现重定向(页面跳转)</strong></p>
<p><img src="https://img-blog.csdnimg.cn/19b261149707401d9f952cdb7a57876b.png" alt="在这里插入图片描述"></p>
<pre><code>    在图 1 中，当客户端访问 Servlet1 时，由于在 Servlet1 中调用了 sendRedirect() 方法将请求重定向到 Servlet2，因此，浏览器收到 Servlet1 的响应消息后，立刻向 Servlet2 发送请求，Servlet2 对请求处理完毕后，再将响应消息回送给客户端浏览器并显示。
</code></pre>
<h2 id="request和response的作用执行流程"><a href="#request和response的作用执行流程" class="headerlink" title="request和response的作用执行流程"></a>request和response的作用执行流程</h2><ol>
<li><p>浏览器发送请求</p>
</li>
<li><p>服务器接收请求,创建两个对象(request和response),将请求的信息封装request对象</p>
</li>
<li><p>找到对应的servlet,将这两个对象传递给servlet</p>
</li>
<li><p>Servlet收到请求,执行service方法,处理自己的业务逻辑,生成动态的内容,将内容返回给服务器</p>
</li>
<li><p>服务器收到内容之后,进行拆分,生成响应信息,返回给浏览器</p>
</li>
</ol>
<h2 id="同一用户不同页面共享数据"><a href="#同一用户不同页面共享数据" class="headerlink" title="同一用户不同页面共享数据"></a>同一用户不同页面共享数据</h2><ol>
<li><p>cookie技术</p>
</li>
<li><p>sendRedirect()重定向</p>
</li>
<li><p>隐藏表单</p>
</li>
<li><p>session技术</p>
</li>
</ol>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="什么是Cookie"><a href="#什么是Cookie" class="headerlink" title="什么是Cookie?"></a>什么是Cookie?</h3><ol>
<li><p>服务器在用户端保存用户的信息，比如用户名，密码等，这些信息就是cookie。</p>
</li>
<li><p>通过下面这张图片可以更好地理解，计算机A向服务器发出一个请求，请求中包含</p>
</li>
</ol>
<p>用户的登录信息，服务器又将这些登录信息回写到计算机A的某个文件目录中，等</p>
<p>到服务器需要这些登录信息的时候，服务器会从计算机A中提取这些登录信息。这</p>
<p>些登录信息也就做cookie。</p>
<p><img src="https://img-blog.csdnimg.cn/edb2e22492c34ed4bebd56e4827fab14.png" alt="在这里插入图片描述"></p>
<h3 id="Cookie可以用来做什么"><a href="#Cookie可以用来做什么" class="headerlink" title="Cookie可以用来做什么?"></a>Cookie可以用来做什么?</h3><ol>
<li>保存用户名，密码，在一定时间内不用重新登录。</li>
<li>记录用户访问网站的喜好，比如有无背景音乐、网站的背景颜色是什么?</li>
<li>网站的个性化，比如定制网站的服务，内容。</li>
</ol>
<h3 id="Cookie的使用"><a href="#Cookie的使用" class="headerlink" title="Cookie的使用"></a>Cookie的使用</h3><ol>
<li><p>Cookie有点像一张表，分成两列，一列是名字，一列是值，数据类型都是String。</p>
</li>
<li><p>如何创建一个Cookie?(在服务端创建的)</p>
<p>Cookie cookie &#x3D; new Cookie(String name,String val);</p>
</li>
<li><p>如何将Cookie添加到一个客户端?</p>
<pre><code>response.add(cookie);
</code></pre>
</li>
<li><p>如何读取Cookie?(从客户端读取服务端的Cookie)</p>
<p>request.getCookies();</p>
</li>
</ol>
<h3 id="Cookie的其他说明"><a href="#Cookie的其他说明" class="headerlink" title="Cookie的其他说明"></a>Cookie的其他说明</h3><p><img src="https://img-blog.csdnimg.cn/cd97280b06764c6284bacf0b0a8775e3.png" alt="在这里插入图片描述"></p>
<h3 id="Cookie实例"><a href="#Cookie实例" class="headerlink" title="Cookie实例"></a>Cookie实例</h3><p>往Cookie中放入属性，又往Cookie取出属性。</p>
<ul>
<li>CookieTest.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sun.net.httpserver.HttpServer;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个Cookie，往Cookie中存入属性。</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Demo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieTest</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">//当用户访问servlet时，就将信息放到该用户的Cookie中</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//服务器端创建一个Cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置Cookie的生存时间</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//如果不设计Cookie的生存时间,当程序运行完，cookie就准备消失。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将cookie回写到客户端</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        printWriter.write(<span class="string">&quot;已经创建了一个cookie&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>CookieTest2.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.Cookie;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">//往Cookie中取出相关的属性。</span><br><span class="line">@WebServlet(&quot;/Demo02&quot;)</span><br><span class="line">public class CookieTest2 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(&quot;text/html;charset=gbk&quot;);</span><br><span class="line">        PrintWriter printWriter = resp.getWriter();</span><br><span class="line">        Cookie a[] = req.getCookies();</span><br><span class="line">        if(a.length==0)&#123;</span><br><span class="line">           printWriter.println(&quot;不存在Cookie&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">       else&#123;</span><br><span class="line">           int flag=0;</span><br><span class="line">           for(int i=0;i&lt;a.length;i++)&#123;</span><br><span class="line">               Cookie temp = a[i];</span><br><span class="line">               if(temp.getName().equals(&quot;color&quot;))&#123;</span><br><span class="line">                   String value = temp.getValue();</span><br><span class="line">                   printWriter.println(&quot;color:&quot;+value);</span><br><span class="line">                   flag=1;</span><br><span class="line">                   break;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           if(flag==0)&#123;</span><br><span class="line">               printWriter.println(&quot;有cookie，但是没含有name为color的cookie&quot;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>CookieTest3.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="comment">//删除Cookie</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Demo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieTest3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//解决中文乱码</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">//获取客户端的cookies</span></span><br><span class="line">        Cookie a[] = req.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(a.length==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有cookie，不用删除。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> flag=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;a.length;i++)&#123;</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">temp</span> <span class="operator">=</span> a[i];</span><br><span class="line">                <span class="keyword">if</span>(temp.getName().equals(<span class="string">&quot;color&quot;</span>))&#123;</span><br><span class="line">                    temp.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                    printWriter.println(<span class="string">&quot;删除含有name为color的cookie&quot;</span>);</span><br><span class="line">                    flag=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag==<span class="number">0</span>)&#123;</span><br><span class="line">                printWriter.println(<span class="string">&quot;存在cookie，但是没有含有name为color的cookie&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="sendRedirect"><a href="#sendRedirect" class="headerlink" title="sendRedirect()"></a>sendRedirect()</h2><pre><code>    通过sendRedirect()方法，我们可以将一个页面的信息传递到另一个页面中，比如可以将用户验证页面的用户名和密码信息传递到Welcome页面中。

    比如可以在Welcome页面中显示用户的用户名和密码。
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/598dd5635bda478d83f63a3cfd051e2f.png" alt="在这里插入图片描述"></p>
<h3 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h3><p>在welcome页面中显示用户的用户名和密码</p>
<ul>
<li>登录页面Login.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//将页面内容改成gbk编码模式，防止中文乱码。</span></span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;html&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;head&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;title&gt;&lt;/title&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/head&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;body&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;center&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;form action=demo02 method=\&quot;post\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;p&gt;name:&lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;/&gt;&lt;/p&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;p&gt;password:&lt;input type=\&quot;password\&quot; name=\&quot;pwd\&quot;/&gt;&lt;/p&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;input type=\&quot;submit\&quot; value=\&quot;submit\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;/form&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/center&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/body&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用户验证页面LoginCheck.java</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">//用户验证Servlet</span><br><span class="line">@WebServlet(&quot;/demo02&quot;)</span><br><span class="line">public class LoginCheck extends HttpServlet &#123;</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        //接收登录界面的账号和密码</span><br><span class="line">        //参数是Login.java的对应input的对应name</span><br><span class="line">        String username = req.getParameter(&quot;name&quot;);</span><br><span class="line">        String password = req.getParameter(&quot;pwd&quot;);</span><br><span class="line"></span><br><span class="line">        //验证用户名和密码是否正确</span><br><span class="line">        if(username.equals(&quot;root&quot;) &amp;&amp;password.equals(&quot;123456&quot;)==true)&#123;</span><br><span class="line">            //合法，跳转到欢迎界面</span><br><span class="line">            res.sendRedirect(&quot;demo03?username=&quot;+username+&quot;&amp;password=&quot;+password);</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            //不合法，跳转到登录界面</span><br><span class="line">            //参数是写上登录界面的url地址</span><br><span class="line">            res.sendRedirect(&quot;Login&quot;);</span><br><span class="line">            System.out.println(&quot;请重新登录！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>欢迎页面Welcome.java</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/demo03&quot;)</span><br><span class="line">public class WelCome extends HttpServlet &#123;</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        //将页面内容改成gbk编码模式，防止中文乱码。</span><br><span class="line">        res.setContentType(&quot;text/html;charset=gbk&quot;);</span><br><span class="line">        //得到从注解名为LoginCheck的servlet的username传递过来的username</span><br><span class="line">        String username = req.getParameter(&quot;username&quot;);</span><br><span class="line">        String password = req.getParameter(&quot;password&quot;);</span><br><span class="line">        PrintWriter printWriter = res.getWriter();</span><br><span class="line">        printWriter.println(&quot;欢迎你，登录成功!&quot;+&quot; &quot;+username+&quot; &quot;+password);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><h3 id="什么是session"><a href="#什么是session" class="headerlink" title="什么是session"></a>什么是session</h3><pre><code>    当用户打开浏览器，访问某个网站时，服务器就会在服务器内存中，为该浏览器分配一个内存空间，该空间会被该浏览器所独占。这块内存空间就叫做session。该空间数据默认存在时间是30min，你也可以想修改。
</code></pre>
<h3 id="session可以用来做什么"><a href="#session可以用来做什么" class="headerlink" title="session可以用来做什么?"></a>session可以用来做什么?</h3><ol>
<li><p>网上商城的购物车。</p>
</li>
<li><p>保存登录用户信息。</p>
</li>
<li><p>将数据放到session中，供同一用户的各个页面使用。</p>
</li>
<li><p>防止用户非法跳转到某个页面。</p>
</li>
</ol>
<h3 id="如何理解session"><a href="#如何理解session" class="headerlink" title="如何理解session"></a>如何理解session</h3><p>可以将session看作成一张表，表里面存放了一些属性名和对应的值。</p>
<p><img src="https://img-blog.csdnimg.cn/8b2765ba413d43b38512a15641abf8af.png" alt="在这里插入图片描述"></p>
<h3 id="如何使用session"><a href="#如何使用session" class="headerlink" title="如何使用session"></a>如何使用session</h3><p><img src="https://img-blog.csdnimg.cn/8f9369e47ce144608f98f6f0b5d6268d.png" alt="在这里插入图片描述"></p>
<h3 id="session的注意事项"><a href="#session的注意事项" class="headerlink" title="session的注意事项"></a>session的注意事项</h3><ol>
<li>session的生存时间默认是30min，如果想要对生存时间进行修改，可以对web.xml文件进行修改。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>40<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li><p>上面所说的30min不是指的是累计时间，而指的是用户的发呆时间。</p>
</li>
<li><p>当客户端访问网站的时候，服务器会给浏览器分配唯一的session id，通过id来区分不同的浏览器，</p>
<p>即为客户端。</p>
</li>
<li><p>因为session中的属性名和值要占用服务器的内存，因此软件公司在迫不得已地情况下才会使用session。</p>
</li>
</ol>
<h3 id="session应用实例"><a href="#session应用实例" class="headerlink" title="session应用实例"></a>session应用实例</h3><ol>
<li><p>实现保存登录用户的信息。</p>
</li>
<li><p>防止用户非法进入到某个页面。</p>
</li>
</ol>
<ul>
<li>登录页面Login.java</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/Login&quot;)</span><br><span class="line">public class Login extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        res.setContentType(&quot;text/html;charset=gbk&quot;);</span><br><span class="line">        PrintWriter printWriter = res.getWriter();</span><br><span class="line">        printWriter.println(&quot;&lt;!DOCTYPE html&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;html&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;head&gt;\n&quot; +</span><br><span class="line">                &quot;    &lt;title&gt;&lt;/title&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/head&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;body&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;center&gt;\n&quot; +</span><br><span class="line">                &quot;    &lt;form action=LoginCheck method=\&quot;post\&quot;&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;p&gt;name:&lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;/&gt;&lt;/p&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;p&gt;password:&lt;input type=\&quot;password\&quot; name=\&quot;pwd\&quot;/&gt;&lt;/p&gt;\n&quot; +</span><br><span class="line">                &quot;        &lt;input type=\&quot;submit\&quot; value=\&quot;submit\&quot;&gt;\n&quot; +</span><br><span class="line">                &quot;\n&quot; +</span><br><span class="line">                &quot;    &lt;/form&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/center&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/body&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/html&gt;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用户验证页面LoginCheck.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用户验证Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginCheck&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheck</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(password.equals(<span class="string">&quot;123456&quot;</span>)==<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">//获取session，并将pass ok存入到session中。</span></span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;pass&quot;</span>,<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">            res.sendRedirect(<span class="string">&quot;Welcome?username=&quot;</span>+username+<span class="string">&quot;&amp;password=&quot;</span>+password);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            res.sendRedirect(<span class="string">&quot;Login&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请重新登录！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>欢迎页面(Welcome.java)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelCome</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//将页面内容改成gbk编码模式，防止中文乱码。</span></span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="comment">//获取session,并从session中获取pass属性对应的值。</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;pass&quot;</span>);</span><br><span class="line">        <span class="comment">//获取没有获取到值，则跳转到登录页面，如果获取了值，则输出这个值是什么。</span></span><br><span class="line">        <span class="keyword">if</span>(s==<span class="literal">null</span>)&#123;</span><br><span class="line">            res.sendRedirect(<span class="string">&quot;Login&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//得到从注解名为LoginCheck的servlet的username传递过来的username</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span>+<span class="string">&quot; &quot;</span>+username+<span class="string">&quot; &quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="servlet中操作数据库"><a href="#servlet中操作数据库" class="headerlink" title="servlet中操作数据库"></a>servlet中操作数据库</h2><pre><code>    在登录页面中输入用户的用户名和密码来进行用户验证，如果输入的用户名和密码匹配数据库中的某一条数据，则进入欢迎页面。
</code></pre>
<h3 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a>架构图</h3><p><img src="https://img-blog.csdnimg.cn/5d9eb8c98f204079b75089ea56b14490.png" alt="在这里插入图片描述"></p>
<ul>
<li><p>mysql依赖包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;<span class="number">8.0</span><span class="number">.30</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>用户登录页面Login.java</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;html&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;head&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;title&gt;&lt;/title&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/head&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;body&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;center&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;form action=LoginCheck method=\&quot;post\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;p&gt;name:&lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;/&gt;&lt;/p&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;p&gt;password:&lt;input type=\&quot;password\&quot; name=\&quot;pwd\&quot;/&gt;&lt;/p&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;input type=\&quot;submit\&quot; value=\&quot;submit\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;/form&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/center&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/body&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>用户验证页面LoginCheck.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用户验证Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginCheck&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheck</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//连接数据库</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//得到连接</span></span><br><span class="line">            connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/company&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//创建statement</span></span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select *from student where username=username and password=password&quot;</span>;</span><br><span class="line">            resultSet = statement.executeQuery(sql);</span><br><span class="line">            <span class="keyword">if</span>(resultSet.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">username1</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(username1==username)&#123;</span><br><span class="line">                    <span class="comment">//表示真的合法</span></span><br><span class="line">                    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">                    session.setAttribute(<span class="string">&quot;pass&quot;</span>, <span class="string">&quot;ok&quot;</span>);</span><br><span class="line">                    res.sendRedirect(<span class="string">&quot;Welcome?username=&quot;</span> + username + <span class="string">&quot;&amp;password=&quot;</span> + password);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    res.sendRedirect(<span class="string">&quot;Login&quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;请重新登录！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                res.sendRedirect(<span class="string">&quot;Login&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;请重新登录！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>欢迎页面Welcome.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelCome</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//将页面内容改成gbk编码模式，防止中文乱码。</span></span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;pass&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(s==<span class="literal">null</span>)&#123;</span><br><span class="line">            res.sendRedirect(<span class="string">&quot;Login&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;返回到登录页面&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//得到从注解名为LoginCheck的servlet的username传递过来的username</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">        printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span>+<span class="string">&quot; &quot;</span>+username+<span class="string">&quot; &quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="在servlet中显示图片"><a href="#在servlet中显示图片" class="headerlink" title="在servlet中显示图片"></a>在servlet中显示图片</h2><ul>
<li><p>在webapp文件夹目录下创建一个img目录，把图片放到这个位置。</p>
</li>
<li><p>显示图片的写法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printWriter.write(<span class="string">&quot;&lt;img src=\&quot;img/ldh.png\&quot;&gt;&lt;br&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="ServletContext详解"><a href="#ServletContext详解" class="headerlink" title="ServletContext详解"></a>ServletContext详解</h2><h3 id="什么是ServletContext？"><a href="#什么是ServletContext？" class="headerlink" title="什么是ServletContext？"></a>什么是ServletContext？</h3><p>要理解ServletContext,就必须和cookie、session做一个对比。</p>
<p>你可以把ServletContext想象成一个共同的空间、可以被所有的用户所访问。也就是说，A用户可以访问D，B用户可以访问D，C用户可以访问D。</p>
<p><img src="https://img-blog.csdnimg.cn/1b1bfb92bd2c4d3da70e7480302053ab.png" alt="在这里插入图片描述"></p>
<h3 id="怎么使用ServletContext"><a href="#怎么使用ServletContext" class="headerlink" title="怎么使用ServletContext?"></a>怎么使用ServletContext?</h3><ol>
<li><p>怎么得到ServletContext实例?</p>
<p>this.getServletContext()</p>
</li>
<li><p>可以把ServletContext想象成一张表，这张表和session的表非常相似。</p>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/4ceffb2a5cc843908bd7d4e134a598fb.png" alt="在这里插入图片描述"></p>
<ol start="3">
<li><p>添加属性</p>
<p>setAttribute(String name,Object value);</p>
</li>
<li><p>得到属性的值</p>
<p>getAttribute(String name);</p>
</li>
<li><p>删除属性</p>
<p>removeAttribute(String name);</p>
</li>
<li><p>生命周期</p>
<p>从创建ServletConext对象开始，到关闭服务器结束。</p>
</li>
</ol>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>存入servletContext的数据会长时间的保存在服务器，会占用内存，因此我们不要往servletContext中添加过大的数据。</p>
<h3 id="servletContext实例"><a href="#servletContext实例" class="headerlink" title="servletContext实例"></a>servletContext实例</h3><p>给servletContext实例中添加一个属性，然后又从里面取出属性。</p>
<ul>
<li>ServletContextTest类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">//给ServletContext添加属性</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servlet01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextTest</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line"></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加属性</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;chris&quot;</span>);</span><br><span class="line">        printWriter.println(<span class="string">&quot;给servletContext添加一个属性，属性名是name,属性值为chris&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ServletContextTest2类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servlet02&quot;)</span></span><br><span class="line"><span class="comment">//得到servletContext中的值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextTest2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//得到属性和它对应的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) servletContext.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        printWriter.println(<span class="string">&quot;从servletContext中得到属性名为name,值为&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="访问路径设置"><a href="#访问路径设置" class="headerlink" title="访问路径设置"></a>访问路径设置</h2><ul>
<li><p>Servlet需要被访问，必须要设置访问路径(urlpattern)。</p>
<p>一个Servlet，可以设置多个访问路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/demo01&quot;,&quot;/demo02&quot;&#125;)</span></span><br></pre></td></tr></table></figure>

<p><strong>相关代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/demo01&quot;,&quot;/demo02&quot;&#125;)</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>urlpattern的配置规则</p>
</li>
</ul>
<ol>
<li><strong>精确查找</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完整的显示路径</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/user/Demo01&quot;&#125;)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>目录匹配</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/user/*&quot;&#125;)</span></span><br></pre></td></tr></table></figure>



<h2 id="综合实例"><a href="#综合实例" class="headerlink" title="综合实例"></a>综合实例</h2><p>对上面的cookie,session,一些知识点的总结，通过一个简易的登录系统来实现。</p>
<ul>
<li><p>index.html(登录页面)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;&lt;/title&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">  &lt;h1&gt;登录界面&lt;/h1&gt;</span><br><span class="line">  &lt;form action=<span class="string">&quot;LoginCheck&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;name:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;password:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;pwd&quot;</span>/&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;keep&quot;</span> value=<span class="string">&quot;2&quot;</span>&gt;两周内不再重新登录&lt;/p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Conn.java(连接类)</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line"></span><br><span class="line">public class Conn&#123;</span><br><span class="line"></span><br><span class="line">    public static Connection getConnection () throws ClassNotFoundException, SQLException &#123;</span><br><span class="line">        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/company&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line">        return connection;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>StudentBeanCheck.java(连接数据库，执行sql语句的类)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是一个处理Student表的类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentBeanCheck</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Connection connection=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> Statement statement=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> ResultSet resultSet=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//连接数据库，并且执行sql语句</span></span><br><span class="line">    <span class="keyword">public</span> ResultSet <span class="title function_">check</span><span class="params">(String username,String password)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//得到连接</span></span><br><span class="line">        connection = Conn.getConnection();</span><br><span class="line">        statement = connection.createStatement();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select *from student where username=username and password=password&quot;</span>;</span><br><span class="line">        resultSet = statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">return</span> resultSet;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>LoginCheck.java(用户验证页面)</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用户验证Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginCheck&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheck</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">//连接数据库</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentBeanCheck</span>().check(username,password);</span><br><span class="line">            <span class="keyword">if</span>(resultSet.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">username1</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password1</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(username1.equals(username)&amp;&amp;password1.equals(password))&#123;</span><br><span class="line">                    <span class="comment">//判断是否勾选了两周内不用重新登录</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">keep</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;keep&quot;</span>);</span><br><span class="line">                    <span class="comment">//如果勾选了，则我们创建Cookie</span></span><br><span class="line">                    <span class="keyword">if</span>(keep!=<span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="comment">//创建Cookie</span></span><br><span class="line">                        <span class="type">Cookie</span> <span class="variable">name</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;myname&quot;</span>, username1);</span><br><span class="line">                        <span class="type">Cookie</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;mypwd&quot;</span>, password);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//设置cookie的生存时间</span></span><br><span class="line">                        name.setMaxAge(<span class="number">14</span> * <span class="number">24</span> * <span class="number">3600</span>);</span><br><span class="line">                        pwd.setMaxAge(<span class="number">14</span> * <span class="number">24</span> * <span class="number">3600</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;调用了。。&quot;</span>);</span><br><span class="line">                        <span class="comment">//回写到客户端</span></span><br><span class="line">                        res.addCookie(name);</span><br><span class="line">                        res.addCookie(pwd);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//表示真的合法</span></span><br><span class="line">                    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">                    session.setAttribute(<span class="string">&quot;username&quot;</span>,username1);</span><br><span class="line">                    session.setAttribute(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">                    res.sendRedirect(<span class="string">&quot;Welcome?username=&quot;</span> + username + <span class="string">&quot;&amp;password=&quot;</span> + password);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    res.sendRedirect(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;请重新登录！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                res.sendRedirect(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;请重新登录！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Welcome.java(欢迎页面)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelCome</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">n</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//将页面内容改成gbk编码模式，防止中文乱码。</span></span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html;charset=gbk&quot;</span>);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (username == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//如果session中没有用户信息，我们再看一下cookie中有没有</span></span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">            Cookie a[] = req.getCookies();</span><br><span class="line">            <span class="keyword">if</span>(a==<span class="literal">null</span>)&#123;</span><br><span class="line">                res.sendRedirect(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;返回到登录页面&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">temp</span> <span class="operator">=</span> a[i];</span><br><span class="line">                <span class="keyword">if</span> (temp.getName().equals(<span class="string">&quot;myname&quot;</span>)) &#123;</span><br><span class="line">                    n = temp.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (temp.getName().equals(<span class="string">&quot;mypwd&quot;</span>)) &#123;</span><br><span class="line">                    p = temp.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (n != <span class="literal">null</span> &amp;&amp; p != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//到LoginCheck页面进行验证</span></span><br><span class="line">                res.sendRedirect(<span class="string">&quot;LoginCheck?username=&quot;</span> + n + <span class="string">&quot;&amp;password=&quot;</span> + p);</span><br><span class="line">                System.out.println(<span class="string">&quot;调用了cookie这&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Cookie a[] = req.getCookies();</span><br><span class="line">            <span class="keyword">if</span>(a.length==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(username+<span class="string">&quot; &quot;</span>+password);</span><br><span class="line">                <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">                printWriter.write(<span class="string">&quot;&lt;img src=\&quot;img/ldh.png\&quot;&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span> + <span class="string">&quot; &quot;</span> + username + <span class="string">&quot; &quot;</span> + password);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="type">int</span> flag=<span class="number">0</span>;</span><br><span class="line">                System.out.println(username+<span class="string">&quot; &quot;</span>+password);</span><br><span class="line">                <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> res.getWriter();</span><br><span class="line">                printWriter.write(<span class="string">&quot;&lt;img src=\&quot;img/ldh.png\&quot;&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;a.length;i++)&#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> a[i].getName();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> a[i].getValue();</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    <span class="keyword">if</span>(name.equals(username)&amp;&amp;pwd.equals(password))&#123;</span><br><span class="line">                        printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span> + <span class="string">&quot; &quot;</span> + name + <span class="string">&quot; &quot;</span> + pwd);</span><br><span class="line">                        flag=<span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(flag==<span class="number">0</span>)&#123;</span><br><span class="line">                    printWriter.println(<span class="string">&quot;欢迎你，登录成功!&quot;</span> + <span class="string">&quot; &quot;</span> + username + <span class="string">&quot; &quot;</span> + password);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p><h4>Copyright © 2020 | Author: acwer | Theme By <a class="theme-author" target="_blank" rel="noopener" href="https://github.com/Xunzhuo/hexo-theme-coder" style="font-size:14px; color: #969696">Coder</a></h4>
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">Page Views: <span id="busuanzi_value_site_pv"></span></span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv">Unique Visitors: <span id="busuanzi_value_site_uv"></span></span>
    
    <label class="el-switch el-switch-blue el-switch-sm" style="vertical-align: sub;">
        <input type="checkbox" name="switch" id="update_style">
        <span class="el-switch-style"></span>
    </label>

    <!--         <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script> -->
</p>
</div>

<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="">
<input type="hidden" id="valine_appKey" value="">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
color: #698fca;
}
.v .vlist .vcard .vhead .vsys {
color: #3a3e4a;
}
.v .vlist .vcard .vh .vmeta .vat {
color: #638fd5;
}
.v .vlist .vcard .vhead .vnick {
color: #6ba1ff;
}
.v a {
color: #8696b1;
}
.v .vlist .vcard .vhead .vnick:hover {
color: #669bfc;
}
</style>
    <script type="text/javascript" color="173,174,173" opacity='1' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>
